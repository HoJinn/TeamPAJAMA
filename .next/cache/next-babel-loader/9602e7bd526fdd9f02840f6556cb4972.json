{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport Head from 'next/head';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core';\nimport theme from 'theme/theme';\nimport { atom, RecoilRoot, useRecoilState, useSetRecoilState } from 'recoil';\nimport { getWindowLayout, windowLayoutAsOnlySetter } from 'recoilStates/layout';\nimport { useRouter } from 'next/router';\nimport { getBookmarkPage, removeBookmarpage } from 'src/routerUtil';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport 'theme/main.css';\nimport 'suneditor/dist/css/suneditor.min.css';\nimport Favicon from \"assets/fav.ico\"; // import ReactDOM from 'react-dom'\n// import('@axe-core/react')\n// .then(\n//   ({default: axe}) => axe(React, ReactDOM, 1000),\n//   ({message}) => console.error(message)\n// )\n\nvar MyApp = function MyApp(props) {\n  var Component = props.Component,\n      pageProps = props.pageProps;\n  var router = useRouter();\n  useEffect(function () {\n    var pathQuery = getBookmarkPage();\n    if (pathQuery && router.pathname === pathQuery.pathname) removeBookmarpage();\n  }, [router]);\n  useEffect(function () {\n    // Remove the server-side injected CSS.\n    var jssStyles = document.querySelector('#jss-server-side');\n    if (jssStyles) jssStyles.parentElement.removeChild(jssStyles); // if (window.navigator.userAgent.match(/MSIE|Internet Explorer|Trident/i)) {\n    //   alert(\"익스플로러를 지원하지 않습니다\");\n    //   location.href = \"microsoft-edge:\" + window.location.href;\n    // }\n  }, []);\n  return __jsx(Wrapper, null, __jsx(Head, null, __jsx(\"title\", null, \"\\uB2E5\\uD130\\uD06C\\uB9B0\"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"minimum-scale=1, initial-scale=1, width=device-width\"\n  }), __jsx(\"link\", {\n    rel: \"icon\",\n    href: Favicon,\n    type: \"image/x-icon\"\n  })), __jsx(WindowLayoutEvent, null, __jsx(ThemeProvider, {\n    theme: theme\n  }, __jsx(CssBaseline, null), __jsx(Component, pageProps))));\n};\n\nMyApp.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var ctx, Component, pageProps, new_ctx;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            ctx = context.ctx, Component = context.Component; // const {store} = ctx;\n\n            pageProps = {}; // 비동기작업 한번에 처리. 스레드 블럭.\n\n            if (!Component.getInitialProps) {\n              _context.next = 7;\n              break;\n            }\n\n            new_ctx = _objectSpread({}, ctx);\n            _context.next = 6;\n            return Component.getInitialProps(new_ctx);\n\n          case 6:\n            pageProps = _context.sent;\n\n          case 7:\n            return _context.abrupt(\"return\", {\n              pageProps: _objectSpread({}, pageProps)\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default MyApp;\nvar prevPathNameAtom = atom({\n  key: 'prevPathNameAtom',\n  \"default\": \"\"\n});\nvar queryClient = new QueryClient();\n\nvar Wrapper = function Wrapper(_ref2) {\n  var children = _ref2.children;\n  return __jsx(QueryClientProvider, {\n    client: queryClient\n  }, __jsx(RecoilRoot, null, children));\n};\n\nvar WindowLayoutEvent = function WindowLayoutEvent(_ref3) {\n  var children = _ref3.children;\n\n  var _useState = useState(true),\n      init = _useState[0],\n      setInit = _useState[1];\n\n  var setWindowLayout = useSetRecoilState(windowLayoutAsOnlySetter);\n\n  var _useRecoilState = useRecoilState(prevPathNameAtom),\n      _useRecoilState2 = _slicedToArray(_useRecoilState, 2),\n      prevPath = _useRecoilState2[0],\n      setPrevPath = _useRecoilState2[1];\n\n  var router = useRouter();\n  useEffect(function () {\n    if (!prevPath || prevPath !== router.pathname) {\n      scrollTo(0, 0);\n    }\n\n    setPrevPath(router.pathname);\n  }, [router]);\n  useEffect(function () {\n    if (init) {\n      setInit(false); // window.addEventListener('load', () => {\n\n      window.addEventListener('resize', function () {\n        return setWindowLayout(getWindowLayout(window));\n      });\n      setWindowLayout(getWindowLayout(window)); // window.addEventListener('scroll',\n      //   () => setWindowLayout(getWindowLayout(window))\n      // )\n      // })\n    }\n\n    return function () {\n      // window.removeEventListener('load', () => {});\n      window.removeEventListener('resize', function () {\n        return setWindowLayout(getWindowLayout());\n      });\n      window.removeEventListener('resize', function () {\n        /** This is intentional*/\n      });\n    };\n  });\n  return __jsx(React.Fragment, null, children);\n};","map":null,"metadata":{},"sourceType":"module"}